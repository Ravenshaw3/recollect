<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Recollect.Mobile.Pages.ReviewPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="http://schemas.microsoft.com/dotnet/2021/maui/maps"
             xmlns:pages="clr-namespace:Recollect.Mobile.Pages"
             Title="Adventure Review">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        
        <ScrollView Grid.Row="0">
            <StackLayout Padding="10">
                <!-- Adventure Summary -->
                <Frame BackgroundColor="LightBlue" CornerRadius="8" Padding="15" x:DataType="pages:ReviewPage">
                    <StackLayout>
                        <Label Text="{Binding AdventureName}" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               HorizontalOptions="Center" />
                        <Label Text="{Binding AdventureSummary}" 
                               FontSize="14" 
                               HorizontalOptions="Center" 
                               Margin="0,5,0,0" />
                    </StackLayout>
                </Frame>
                
                <!-- Statistics -->
                <Frame BackgroundColor="White" CornerRadius="8" Padding="15" Margin="0,10,0,0" x:DataType="pages:ReviewPage">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        
                        <StackLayout Grid.Column="0" HorizontalOptions="Center">
                            <Label Text="{Binding WaypointCount}" 
                                   FontSize="24" 
                                   FontAttributes="Bold" 
                                   HorizontalOptions="Center" />
                            <Label Text="Waypoints" 
                                   FontSize="12" 
                                   HorizontalOptions="Center" />
                        </StackLayout>
                        
                        <StackLayout Grid.Column="1" HorizontalOptions="Center">
                            <Label Text="{Binding Distance}" 
                                   FontSize="24" 
                                   FontAttributes="Bold" 
                                   HorizontalOptions="Center" />
                            <Label Text="Distance (km)" 
                                   FontSize="12" 
                                   HorizontalOptions="Center" />
                        </StackLayout>
                        
                        <StackLayout Grid.Column="2" HorizontalOptions="Center">
                            <Label Text="{Binding Duration}" 
                                   FontSize="24" 
                                   FontAttributes="Bold" 
                                   HorizontalOptions="Center" />
                            <Label Text="Duration" 
                                   FontSize="12" 
                                   HorizontalOptions="Center" />
                        </StackLayout>
                    </Grid>
                </Frame>
                
                <!-- Route Map -->
                <Frame BackgroundColor="White" CornerRadius="8" Padding="5" Margin="0,10,0,0">
                    <maps:Map x:Name="ReviewMap" 
                              IsShowingUser="False" 
                              HeightRequest="200" />
                </Frame>
            </StackLayout>
        </ScrollView>
        
        <StackLayout Grid.Row="1" 
                     Orientation="Horizontal" 
                     HorizontalOptions="Center" 
                     Margin="10">
            <CheckBox x:Name="OffloadAfterUpload" />
            <Label Text="Free local storage after upload" VerticalTextAlignment="Center" Margin="6,0,12,0" />
            <Button Text="Share Adventure" 
                    Clicked="OnShareClicked" 
                    Margin="5" />
            <Button Text="Save Adventure" 
                    Clicked="OnSaveClicked" 
                    Margin="5" />
            <Button Text="Upload to Server" 
                    Clicked="OnUploadClicked" 
                    Margin="5" />
        </StackLayout>
    </Grid>
</ContentPage>
